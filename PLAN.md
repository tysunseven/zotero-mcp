# 智能文献调研与知识积累系统 PLAN

更新时间：2026-02-14

## 0. 总体目标
1. 根据自然语言主题/关键词自动调研并下载文献。
2. 对单篇文献输出结构化总结。
3. 基于文献库进行可追溯问答。
4. 持续积累知识，逐步形成“领域专家”能力。

## 1. 基线打通与问题修复

### 1.1 Zotero MCP 基础环境搭建（已完成）
1. 本地仓库已就绪：`C:\Users\28613\Documents\GitHub\zotero-mcp`。
2. 虚拟环境与依赖已安装，CLI可用。
3. `zotero-mcp` 本地命令已可执行。

### 1.2 OpenAI Embedding 链路统一（已完成）
1. 已切换到 OpenAI embedding 路径，不再使用本地默认 embedding。
2. 已完成模型/配置一致性修复，避免 collection embedding mismatch。
3. 已验证可用 embedding endpoint 与模型可调用。

### 1.3 语义索引构建（已完成）
1. 小规模冒烟索引已完成。
2. 全量索引已完成（文献已入库）。
3. `db-status` 已确认文档数量与 embedding 模式正常。

### 1.4 兼容性与稳定性修复（已完成）
1. 修复 `db-inspect` 的 Windows 编码问题。
2. 修复长文本 embedding 上下文超限导致的入库失败。
3. 修复 MCP stdio 启动握手噪声（banner/输出干扰）问题。

### 1.5 Codex 接入 Zotero MCP（已完成）
1. 已创建启动脚本：`C:\Users\28613\.codex\run-zotero-mcp.ps1`。
2. 已配置 Codex MCP server：`C:\Users\28613\.codex\config.toml`。
3. 已完成 Codex -> Zotero MCP 连通验证。

### 1.6 MCP 启动超时专项排查（已完成）
1. 发现超时主因：启动链路使用 `powershell`(5.1) + 重型检查造成握手不稳定。
2. 已将 MCP 启动宿主切换为 `pwsh`。
3. 已将健康检查替换为轻量 .NET 探测（TCP + HTTP）。
4. 修复后多次启动验证通过，不再出现启动超时。

### 1.7 第7步最小验收（已完成）
1. `zotero_search_items`：通过。
2. `zotero_semantic_search`：通过。
3. 单篇 fulltext + 结构化总结：通过。
4. 验收过程中无 `stream disconnected`、无 `WinError 10061`。

## 2. 当前状态
1. `zotero-mcp` 已达到“可稳定使用”的工程基线，可进入上层功能开发。
2. 本地 Zotero API 为关键前置条件：调用前需确保 Zotero 进程运行。
3. 针对 provider 联调与 MCP 端到端验证，默认采用非沙箱执行路径。

## 3. 下一阶段计划（待做）

### 3.1 文献自动调研与下载（待做）
1. 定义统一查询输入协议（主题、时间范围、来源、数量上限）。
2. 实现多源检索调度（先从可控源开始，如 arXiv/PubMed）。
3. 建立去重与入库策略（DOI/标题归一化）。
4. 建立下载状态机（待下载、成功、失败、重试）。

### 3.2 单篇文献结构化总结（待做）
1. 固定总结模板：Problem/Method/Results/Limitations/Keywords。
2. 对 `zotero_get_item_fulltext` 结果做清洗与分段。
3. 落库总结结果并保留模型与版本元数据。
4. 增加质量检查（字段完整性、长度阈值、空结果拦截）。

### 3.3 库内问答（RAG）（待做）
1. 建立检索编排：关键词检索 + 语义检索混合召回。
2. 加入证据引用约束（答案必须给出 item_key/标题）。
3. 设计失败回退策略（无证据时拒答或降级）。
4. 增加问答评测集（准确性、引用覆盖率、一致性）。

### 3.4 知识积累与“专家成长”（待做）
1. 设计知识增量指标：已读文献数、主题覆盖、概念节点增长。
2. 设计知识图谱最小模型：论文-主题-方法-结论。
3. 建立阶段性评估：按周输出“能力增长报告”。
4. 建立遗忘与冲突处理规则（新旧结论冲突时的优先级）。

### 3.5 工程化与运行保障（待做）
1. 把“启动检查 + 三条最小验收”固化为一键脚本。
2. 增加日志分层（运行日志/诊断日志/错误快照）。
3. 固化配置管理（环境变量模板、敏感项隔离）。
4. 输出开发文档（启动、索引、验收、故障排查）。

## 4. 近期执行顺序（建议）
1. 先做 3.1（自动检索下载最小闭环）。
2. 再做 3.2（单篇总结流水线）。
3. 然后做 3.3（问答与引用约束）。
4. 最后做 3.4 与 3.5（增长评估与工程化收敛）。
